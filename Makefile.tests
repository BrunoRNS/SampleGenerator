###############################################################################
# Makefile.tests - Testing rules for Sample Generator project
#
# Provides targets to run all tests and individual test modules.
###############################################################################

include Makefile.build

.PHONY: test check-wave play-wave play-midi

# Test environment variables
CHECK_WAVE_DIR := tests/checkWAVE
PLAY_WAVE_DIR := tests/playWAVE
PLAY_MIDI_DIR := tests/playMIDI
PY_MIDI_VENV := $(PLAY_MIDI_DIR)/.venv

###############################################################################
# Run all tests
###############################################################################

test: check-wave play-wave play-midi
    @echo "All tests completed successfully!"

###############################################################################
# Individual test targets
###############################################################################

# Run check-wave Julia test
check-wave: build-check-wave
    @echo "Checking wave files..."
    @julia --project=$(CHECK_WAVE_DIR) $(CHECK_WAVE_DIR)/src/checkWave.jl

# Run play-wave Julia test
play-wave: build-play-wave
    @echo "Playing wave files..."
    @julia --project=$(PLAY_WAVE_DIR) $(PLAY_WAVE_DIR)/src/playWave.jl

# Run play-midi Python test
play-midi: build-play-midi
    @echo "Playing MIDI files..."
    $(PY_MIDI_VENV)/bin/python3